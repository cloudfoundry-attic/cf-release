---
name: gorouter

description: "The Router maintains a list of live routes for the applications running on each DEA. The Router load balances requests (based on their Host header) between each application instance registered for a specific route. It requires to be behind a load balancer that can terminate SSL connections."

templates:
  gorouter_ctl.erb: bin/gorouter_ctl
  gorouter.yml.erb: config/gorouter.yml
  gorouter_logrotate.cron.erb: config/gorouter_logrotate.cron
  logrotate.conf.erb: config/logrotate.conf
  drain: bin/drain

packages:
  - common
  - gorouter

properties:
  router.port:
    description: "Listening Port for Router."
    default: 80
  router.status.port:
    description: "Port for the Router varz/status endpoint."
    default: 8080
  router.status.user:
    description: "Username for HTTP basic auth to the varz/status endpoint."
  router.status.password:
    description: "Password for HTTP basic auth to the varz/status endpoint."
  router.requested_route_registration_interval_in_seconds:
    description: "Interval at which the router requests routes to be registered."
    default: 20
  router.number_of_cpus:
    description: "Number of CPUs to utilize, the default (-1) will equal the number of available CPUs"
    default: -1
  router.debug_addr:
    description: "address at which to serve debug info"
    default: "0.0.0.0:17001"
  router.secure_cookies:
    description: "set secure flag on http cookies"
    default: false
  nats.user:
    description:
  nats.password:
    description:
  nats.port:
    description:
  nats.machines:
    description: "IP of each NATS cluster member."
  router.offset:
    description:
    default: 0
  router.trace_key:
    description:
      If the X-Vcap-Trace request header is set and has this value,
      trace headers are added to the response.
    default: 22
  request_timeout_in_seconds:
    description: "Timeout in seconds for Router -> Endpoint roundtrip."
    default: 900
  metron_endpoint.host:
    description: "The host used to emit messages to the Metron agent."
    default: "127.0.0.1"
  metron_endpoint.dropsonde_port:
    description: "The port used to emit dropsonde messages to the Metron agent."
    default: 3457
  metron_endpoint.port:
    description: "The port used to emit legacy messages to the Metron agent."
    default: 3456
  metron_endpoint.shared_secret:
    description: "The key used to sign log messages."
  networks.apps:
    description: "GoRouter network information."
  dropsonde.enabled:
    default: false
    description: "Enable the dropsonde emitter library"
