#!/bin/bash
case $1 in
  start)
    shift
    for n in `seq 1 100`; do
      if [ -f /tmp/vcap_chown.out ]; then
        break
      fi
      sleep 0.1
    done

    touch /store/log/mongodb.log
    mkdir -p /store/instance/data

    # warden_service_ctl start 1.8
    # warden_service_ctl start 1.8 --journal
    # warden_service_ctl start 2.0
    # warden_service_ctl start 2.0 --nojournal
    version=$1
    shift
    args=$*
    exec /usr/share/mongodb/mongodb-$version/mongod $args --config /etc/mongodb.conf
    ;;

  stop)
    #TODO
    ;;

  status)
    #TODO
    ;;

  *)
    echo "Usage: $0 {start|stop|status}"

    ;;
esac
